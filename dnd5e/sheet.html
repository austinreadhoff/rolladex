<html>

<head>
    <title>RollaDex</title>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta content="utf-8" http-equiv="encoding">

    <link rel="stylesheet" href="../css/bootstrap-grid.min.css">
    <link rel="stylesheet" href="../css/rpgui.min.css">
    <link rel="stylesheet" href="../css/global.css">
    <link rel="stylesheet" href="../css/autocomplete.css">
    <link rel="stylesheet" href="../css/print.css" media="print">
    
    <link rel="stylesheet" href="css/dnd5e.css">
    <link rel="stylesheet" href="css/print.css" media="print">

    <script>require("../src/dnd5e/spells.js")</script>
    <script>require("../src/dnd5e/json-io.js")</script>
    <script>require("../src/dnd5e/dnd5e.js")</script>
</head>

<body class="rpgui-content">
    <modal params="name: 'dice-modal'">
        <dice-roller></dice-roller>
    </modal>

    <div class="nav print-hidden">
        <div>
            <button class="nav-link rpgui-button active down" id="stats-tab"><p>Stats</p></button>
            <button class="nav-link rpgui-button" id="bio-tab"><p>Bio</p></button>
            <button class="nav-link rpgui-button" id="spellbook-tab"><p>Spellbook</p></button>
            <button class="nav-link rpgui-button" id="spellcatalog5e-tab"><p>Spell Catalog</p></button>
        </div>
        <div>
            <button class="short-button modal-opener" data-bind="attr: { 'data-modal': 'dice-modal' }">âš„ Roll Dice</button>
            <button class="short-button" id="bttn-short-rest">ðŸ’¤ Short Rest</button>
            <button class="short-button" id="bttn-long-rest">ðŸ’¤ Long Rest</button>
            <button class="short-button modal-opener" data-bind="attr: { 'data-modal': 'rules-modal' }">âš  Special Rules</button>
        </div>
    </div>
    <div class="tab-content">
        <div data-bind="with: character" class="tab-pane show active" id="stats" role="tabpanel" aria-labelledby="stats-tab">
            <modal params="name: 'rules-modal'">
                <input data-bind="checked: $parent.rules().alert" class="rpgui-checkbox alert-check" type="checkbox" id="rules-alert">
                <label class="form-check-label" for="rules-alert">Alert (Feat)</label><br/>
                <input data-bind="checked: $parent.rules().harengon" class="rpgui-checkbox harengon-check" type="checkbox" id="rules-harengon">
                <label class="form-check-label" for="rules-harengon">Harengon (Race)</label><br/>
                <input data-bind="checked: $parent.rules().jackOfAllTrades" class="rpgui-checkbox joat-check" type="checkbox" id="rules-joat">
                <label class="form-check-label" for="rules-joat">Jack of All Trades (Bard)</label><br/>
                <input data-bind="checked: $parent.rules().remarkableAthlete" class="rpgui-checkbox joat-check" type="checkbox" id="rules-ra">
                <label class="form-check-label" for="rules-ra">Remarkable Athlete (Fighter - Champion)</label><br/>
                <input data-bind="checked: $parent.rules().elegantCourtier" class="rpgui-checkbox joat-check" type="checkbox" id="rules-ec">
                <label class="form-check-label" for="rules-ec">Elegant Courtier (Fighter - Samuarai)</label><br/>
                <input data-bind="checked: $parent.rules().auraProtection" class="rpgui-checkbox auraProtection-check" type="checkbox" id="rules-auraProtection">
                <label class="form-check-label" for="rules-auraProtection">Aura of Protection (Paladin)</label><br/>
                <input data-bind="checked: $parent.rules().auraSentinel" class="rpgui-checkbox auraSentinel-check" type="checkbox" id="rules-auraSentinel">
                <label class="form-check-label" for="rules-auraSentinel">Aura of the Sentinel (Paladin - Watchers)</label><br/>
                <input data-bind="checked: $parent.rules().otherworldlyGlamour" class="rpgui-checkbox joat-check" type="checkbox" id="rules-og">
                <label class="form-check-label" for="rules-og">Otherworldly Glamour (Ranger - Fey Wanderer)</label><br/>
                <input data-bind="checked: $parent.rules().rakishAudacity" class="rpgui-checkbox joat-check" type="checkbox" id="rules-rakish">
                <label class="form-check-label" for="rules-rakish">Rakish Audacity (Rogue - Swashbuckler)</label><br/>
            </modal>

            <div id="stats-container" class="container-fluid">
                <div class="header row rpgui-container framed-golden">
                    <div class="col-4 form-group">
                        <label for="character-name">Character Name</label>
                        <input data-bind="textInput: characterName" id="character-name" >
                    </div>

                    <div class="col-8 container">
                        <div class="row">
                            <div class="form-group col">
                                <label for="class-level">Class & Level</label>
                                <input data-bind="textInput: classLevel" id="class-level" >
                            </div>
                            <div class="form-group col">
                                <label for="background">Background</label>
                                <input data-bind="textInput: background" id="background" >
                            </div>
                            <div class="form-group col">
                                <label for="player-name">Player Name</label>
                                <input data-bind="textInput: playerName" id="player-name" >
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col">
                                <label for="race">Race</label>
                                <input data-bind="textInput: race" id="race" >
                            </div>
                            <div class="form-group col">
                                <label for="Alignment">Alignment</label>
                                <input data-bind="textInput: alignment"id="alignment" >
                            </div>
                            <div class="form-group col">
                                <label for="xp">Experience Points</label>
                                <input data-bind="textInput: xp" id="xp" >
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col">
                        <div class="container">
                            <div class="row">
                                <div id="ability-scores" class="  col-4 rpgui-container framed">
                                    <div class="ability-score-container form-group">
                                        <label>Strength</label>
                                        <span data-bind="text: abilityMod(str())" id="str-mod" class="ability-mod"></span>
                                        <input data-bind="textInput: str" id="str" class=" ability-input">
                                    </div>
                                    <div class="ability-score-container form-group">
                                        <label>Dexterity</label>
                                        <span data-bind="text: abilityMod(dex())" id="dex-mod" class="ability-mod"></span>
                                        <input data-bind="textInput: dex" id="dex" class=" ability-input">
                                    </div>
                                    <div class="ability-score-container form-group">
                                        <label>Constitution</label>
                                        <span data-bind="text: abilityMod(con())" id="con-mod" class="ability-mod"></span>
                                        <input data-bind="textInput: con" id="con" class=" ability-input">
                                    </div>
                                    <div class="ability-score-container form-group">
                                        <label>Intelligence</label>
                                        <span data-bind="text: abilityMod(int())" id="int-mod" class="ability-mod"></span>
                                        <input data-bind="textInput: int" id="int" class=" ability-input">
                                    </div>
                                    <div class="ability-score-container form-group">
                                        <label>Wisdom</label>
                                        <span data-bind="text: abilityMod(wis())" id="wis-mod" class="ability-mod"></span>
                                        <input data-bind="textInput: wis" id="wis" class=" ability-input">
                                    </div>
                                    <div class="ability-score-container form-group">
                                        <label>Charisma</label>
                                        <span data-bind="text: abilityMod(char())" id="char-mod" class="ability-mod"></span>
                                        <input data-bind="textInput: char" id="char" class=" ability-input">
                                    </div>
                                </div>
                                <div id="skills-etc" class="rpgui-container framed">
                                    <div class="form-check print-hidden">
                                        <input data-bind="checked: inspiration" class="rpgui-checkbox" type="checkbox" id="inspiration">
                                        <label class="form-check-label" for="inspiration">Inspiration</label>
                                    </div>
                                    <div class="form-group">
                                        <label for="proficiency">Proficiency Bonus</label><br/>
                                        <input data-bind="textInput: proficiency" id="proficiency" >
                                    </div>
                                    <div id="saving-throws" >
                                        <label>Saving Throws</label>
                                        <div class="form-check">
                                            <input data-bind="checked: savingStr" class="rpgui-checkbox" type="checkbox" id="saving-str">
                                            <label data-bind="text: savingThrowCheckbox(str(), savingStr())" id="saving-str-mod" for="saving-str"></label>
                                            <label class="form-check-label" for="saving-str">Strength</label>
                                        </div>
                                        <div class="form-check">
                                            <input data-bind="checked: savingDex" class="rpgui-checkbox" type="checkbox" id="saving-dex">
                                            <label data-bind="text: savingThrowCheckbox(dex(), savingDex())" id="saving-dex-mod" for="saving-dex"></label>
                                            <label class="form-check-label" for="saving-dex">Dexterity</label>
                                        </div>
                                        <div class="form-check">
                                            <input data-bind="checked: savingCon" class="rpgui-checkbox" type="checkbox" id="saving-con">
                                            <label data-bind="text: savingThrowCheckbox(con(), savingCon())" id="saving-con-mod" for="saving-con"></label>
                                            <label class="form-check-label" for="saving-con">Constitution</label>
                                        </div>
                                        <div class="form-check">
                                            <input data-bind="checked: savingInt" class="rpgui-checkbox" type="checkbox" id="saving-int">
                                            <label data-bind="text: savingThrowCheckbox(int(), savingInt())" id="saving-int-mod" for="saving-int"></label>
                                            <label class="form-check-label" for="saving-int">Intelligence</label>
                                        </div>
                                        <div class="form-check">
                                            <input data-bind="checked: savingWis" class="rpgui-checkbox" type="checkbox" id="saving-wis">
                                            <label data-bind="text: savingThrowCheckbox(wis(), savingWis())" id="saving-wis-mod" for="saving-wis"></label>
                                            <label class="form-check-label" for="saving-wis">Wisdom</label>
                                        </div>
                                        <div class="form-check">
                                            <input data-bind="checked: savingChar" class="rpgui-checkbox" type="checkbox" id="saving-char">
                                            <label data-bind="text: savingThrowCheckbox(char(), savingChar())" id="saving-char-mod" for="saving-char"></label>
                                            <label class="form-check-label" for="saving-char">Charisma</label>
                                        </div>
                                    </div>
                                    <div id="skills" >
                                        <label>Skills</label>
                                        <div>
                                            <div data-bind="skillbox: acrobatics" class="skillbox" id="acrobatics"></div>
                                            <span data-bind="text: abilityMod(dex(), [0,1], acrobatics())" id="acrobatics-mod" ></span>
                                            <label class="form-check-label" for="acrobatics">Acrobatics</label>
                                            <label class="ability-note">(Dex)</label>
                                        </div>
                                        <div>
                                            <div data-bind="skillbox: animalHandling" class="skillbox" id="animal-handling"></div>
                                            <span data-bind="text: abilityMod(wis(), [0], animalHandling())" id="animal-handling-mod" ></span>
                                            <label class="form-check-label" for="animal-handling">Animal Handling</label>
                                            <label class="ability-note">(Wis)</label>
                                        </div>
                                        <div>
                                            <div data-bind="skillbox: arcana"  class="skillbox" id="arcana"></div>
                                            <span data-bind="text: abilityMod(int(), [0], arcana())" id="arcana-mod" ></span>
                                            <label class="form-check-label" for="arcana">Arcana</label>
                                            <label class="ability-note">(Int)</label>
                                        </div>
                                        <div>
                                            <div data-bind="skillbox: athletics" class="skillbox" id="athletics"></div>
                                            <span data-bind="text: abilityMod(str(), [0,1], athletics())" id="athletics-mod" ></span>
                                            <label class="form-check-label" for="athletics">Athletics</label>
                                            <label class="ability-note">(Str)</label>
                                        </div>
                                        <div>
                                            <div data-bind="skillbox: deception" class="skillbox" id="deception"></div>
                                            <span data-bind="text: abilityMod(char(), [0,3], deception())" id="deception-mod" ></span>
                                            <label class="form-check-label" for="deception">Deception</label>
                                            <label class="ability-note">(Cha)</label>
                                        </div>
                                        <div>
                                            <div data-bind="skillbox: history" class="skillbox" id="history"></div>
                                            <span data-bind="text: abilityMod(int(), [0], history())" id="history-mod" ></span>
                                            <label class="form-check-label" for="history">History</label>
                                            <label class="ability-note">(Int)</label>
                                        </div>
                                        <div>
                                            <div data-bind="skillbox: insight" class="skillbox" id="insight"></div>
                                            <span data-bind="text: abilityMod(wis(), [0], insight())" id="insight-mod" ></span>
                                            <label class="form-check-label" for="insight">Insight</label>
                                            <label class="ability-note">(Wis)</label>
                                        </div>
                                        <div>
                                            <div data-bind="skillbox: intimidation" class="skillbox" id="intimidation"></div>
                                            <span data-bind="text: abilityMod(char(), [0,3], intimidation())" id="intimidation-mod" ></span>
                                            <label class="form-check-label" for="intimidation">Intimidation</label>
                                            <label class="ability-note">(Cha)</label>
                                        </div>
                                        <div>
                                            <div data-bind="skillbox: investigation" class="skillbox" id="investigation"></div>
                                            <span data-bind="text: abilityMod(int(), [0], investigation())" id="investigation-mod" ></span>
                                            <label class="form-check-label" for="investigation">Investigation</label>
                                            <label class="ability-note">(Int)</label>
                                        </div>
                                        <div>
                                            <div data-bind="skillbox: medicine" class="skillbox" id="medicine"></div>
                                            <span data-bind="text: abilityMod(wis(), [0], medicine())" id="medicine-mod" ></span>
                                            <label class="form-check-label" for="medicine">Medicine</label>
                                            <label class="ability-note">(Wis)</label>
                                        </div>
                                        <div>
                                            <div data-bind="skillbox: nature" class="skillbox" id="nature"></div>
                                            <span data-bind="text: abilityMod(int(), [0], nature())" id="nature-mod" ></span>
                                            <label class="form-check-label" for="nature">Nature</label>
                                            <label class="ability-note">(Int)</label>
                                        </div>
                                        <div>
                                            <div data-bind="skillbox: perception" class="skillbox" id="perception"></div>
                                            <span data-bind="text: abilityMod(wis(), [0], perception())" id="perception-mod" ></span>
                                            <label class="form-check-label" for="perception">Perception</label>
                                            <label class="ability-note">(Wis)</label>
                                        </div>
                                        <div>
                                            <div data-bind="skillbox: performance" class="skillbox" id="performance"></div>
                                            <span data-bind="text: abilityMod(char(), [0,3], performance())" id="performance-mod" ></span>
                                            <label class="form-check-label" for="performance">Performance</label>
                                            <label class="ability-note">(Cha)</label>
                                        </div>
                                        <div>
                                            <div data-bind="skillbox: persuasion" class="skillbox" id="persuasion"></div>
                                            <span data-bind="text: abilityMod(char(), [0,2,3], persuasion())" id="persuasion-mod" ></span>
                                            <label class="form-check-label" for="persuasion">Persuasion</label>
                                            <label class="ability-note">(Cha)</label>
                                        </div>
                                        <div>
                                            <div data-bind="skillbox: religion" class="skillbox" id="religion"></div>
                                            <span data-bind="text: abilityMod(int(), [0], religion())" id="religion-mod" ></span>
                                            <label class="form-check-label" for="religion">Religion</label>
                                            <label class="ability-note">(Int)</label>
                                        </div>
                                        <div>
                                            <div data-bind="skillbox: slightOfHand" class="skillbox" id="slight-of-hand"></div>
                                            <span data-bind="text: abilityMod(dex(), [0,1], slightOfHand())" id="slight-of-hand-mod" ></span>
                                            <label class="form-check-label" for="slight-of-hand">Sleight of Hand</label>
                                            <label class="ability-note">(Dex)</label>
                                        </div>
                                        <div>
                                            <div data-bind="skillbox: stealth" class="skillbox" id="stealth"></div>
                                            <span data-bind="text: abilityMod(dex(), [0,1], stealth())" id="stealth-mod" ></span>
                                            <label class="form-check-label" for="stealth">Stealth</label>
                                            <label class="ability-note">(Dex)</label>
                                        </div>
                                        <div>
                                            <div data-bind="skillbox: survival" class="skillbox" id="survival"></div>
                                            <span data-bind="text: abilityMod(wis(), [0], survival())" id="survival-mod" ></span>
                                            <label class="form-check-label" for="survival">Survival</label>
                                            <label class="ability-note">(Wis)</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group col textarea-col">
                                    <label for="proficiencies-languages">Proficiencies & Languages</label>
                                    <textarea data-bind="textInput: proficienciesLanguages"  id="proficiencies-languages" rows="9"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col rpgui-container framed">
                        <div class="container">
                            <div class="row">
                                <div class="container">
                                    <div class="row">
                                        <div class="form-group col">
                                            <label for="armor-class">Armor Class</label>
                                            <input data-bind="textInput: armorClass" id="armor-class" >
                                        </div>
                                        <div class="form-group col">
                                            <label for="armor-class">Initiative</label>
                                            <input data-bind="value: abilityMod(dex(), [0,1,4,5,6,8])" id="initiative" readonly>
                                        </div>
                                        <div class="form-group col">
                                            <label for="speed">Speed</label>
                                            <input data-bind="textInput: speed" id="speed" >
                                        </div>
                                    </div>
                                    <label class="row">Hit Points</label>
                                    <div class="row">
                                        <fancy-bar params="currentValue: currentHP, maxValue: maxHP, color: 'red'"></fancy-bar>
                                    </div>
                                    <label class="row">Hit Dice</label>
                                    <div class="row">
                                        <fancy-bar params="currentValue: currentHitDice, maxValue: maxHitDice, color: 'green'"></fancy-bar>
                                    </div>
                                    <div class="row">
                                        <div class="col print-hidden">
                                            <label class="col">Temporary HP</label>
                                            <input data-bind="textInput: tempHP" id="temp-hp" >
                                        </div>
                                        <div class="col container print-hidden">
                                            <label class="row">Death Saves</label>
                                            <div class="row">
                                                <label class="col-6">Successes</label>
                                                <div class="col-2"><input data-bind="checked: deathSavingSuccess1" class="rpgui-checkbox" type="checkbox" id="death-saving-success-1"><label for="death-saving-success-1"></label></div>
                                                <div class="col-2"><input data-bind="checked: deathSavingSuccess2" class="rpgui-checkbox" type="checkbox" id="death-saving-success-2"><label for="death-saving-success-2"></label></div>
                                                <div class="col-2"><input data-bind="checked: deathSavingSuccess3" class="rpgui-checkbox" type="checkbox" id="death-saving-success-3"><label for="death-saving-success-3"></label></div>
                                            </div>
                                            <div class="row">
                                                <label class="col-6">Failures</label>
                                                <div class="col-2"><input data-bind="checked: deathSavingFailure1" class="rpgui-checkbox" type="checkbox" id="death-saving-failure-1"><label for="death-saving-failure-1"></label></div>
                                                <div class="col-2"><input data-bind="checked: deathSavingFailure2" class="rpgui-checkbox" type="checkbox" id="death-saving-failure-2"><label for="death-saving-failure-2"></label></div>
                                                <div class="col-2"><input data-bind="checked: deathSavingFailure3" class="rpgui-checkbox" type="checkbox" id="death-saving-failure-3"><label for="death-saving-failure-3"></label></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <hr>
                            <div class="row">
                                <div class="container">
                                    <label class="full-width-label">Attacks</label>
                                    <button data-bind="click: addAttackRow" type="button" id="btn-add-attack" class="rpgui-button btn-small">+</button>
                                    <div class="row" style="text-align: center; margin-top:5px;">
                                        <label class="col-1 print-hidden"></label>
                                        <label class="col-4">Name</label>
                                        <label class="col-2">Bonus</label>
                                        <label class="col-4">Damage</label>
                                    </div>
                                    <div data-bind="foreach: attackStats" id="attack-stats">
                                        <div data-bind="attr: { 'data-modal': 'attack-modal-'+$index() }
                                            , event: { drop: function(data, e) { e.target.closest('[draggable=true]').style.borderTop = '2px solid transparent'; $root.character().removeAttackRow(draggedAttack); $root.character().attackStats.splice($index(),0,draggedAttack) },
                                                dragstart: function(data, e) { draggedAttack = $data; e.target.style.opacity = .5; return true; },
                                                dragend: function(data, e) { draggedAttack = null; e.target.style.opacity = 1; },
                                                dragenter: function(data, e) { e.target.closest('[draggable=true]').style.borderTop = '2px solid #d27d2b' },
                                                dragleave: function(data, e) { e.target.closest('[draggable=true]').style.borderTop = '2px solid transparent' },
                                                dragover: function(data, e) { }}" 
                                            class="attack-stat-row row modal-opener"
                                            draggable="true">
                                            <input data-bind="value: name" class=" col-5 attack-stat" readonly>
                                            <input data-bind="value: $parent.attackBonus(ability(), proficient(), bonusAttk())" class=" col-2 attack-stat" readonly>
                                            <input data-bind="value: $parent.attackDamage(ability(), bonusDmg(), dmgDice(), dmgType())" class=" col-5 attack-stat" readonly>
                                        </div>
                                        <modal params="name: 'attack-modal-'+$index()">
                                            <div class="container">
                                                <div class="row">
                                                    <div class="form-group col-6">
                                                        <label>Name</label>
                                                        <input data-bind="textInput: $parent.name">
                                                    </div>
                                                    <div class="form-group col-3">
                                                        <label for="spellcasting-ability">Ability</label>
                                                        <select data-bind="value: $parent.ability" class="rpgui-dropdown">
                                                        <option value="STR">STR</option>
                                                        <option value="DEX">DEX</option>
                                                        <option value="CON">CON</option>
                                                        <option value="INT">INT</option>
                                                        <option value="WIS">WIS</option>
                                                        <option value="CHAR">CHA</option>
                                                        </select>
                                                    </div>
                                                    <div class="form-group col-3">
                                                        <input data-bind="checked: $parent.proficient, attr: { id: 'attack-prof-'+$index() }" type="checkbox" class="rpgui-checkbox">
                                                        <label data-bind="attr: { for: 'attack-prof-'+$index() }">Proficient</label>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="form-group col">
                                                        <label>Damage Dice</label>
                                                        <input data-bind="textInput: $parent.dmgDice">
                                                    </div>
                                                    <div class="form-group col">
                                                        <label>Damage Type</label>
                                                        <input data-bind="textInput: $parent.dmgType">
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="form-group col">
                                                        <label>Additional To-Hit</label>
                                                        <input data-bind="textInput: $parent.bonusAttk">
                                                    </div>
                                                    <div class="form-group col">
                                                        <label>Additional Damage</label>
                                                        <input data-bind="textInput: $parent.bonusDmg">
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="form-group col textarea-col">
                                                        <label>Notes</label>
                                                        <textarea data-bind="textInput: $parent.notes" rows="5"></textarea>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col">
                                                        <button data-bind="click: function(data, event) { $parentContext.$parent.removeAttackRow($parent) }" class="rpgui-button">Delete Attack</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </modal>
                                    </div>
                                </div>
                            </div>
                            <hr>
                            <div class="row">
                                <div class="container">
                                    <div class="row">
                                        <div class="col form-group">
                                            <img class="currency" src="../img/pixelated/cp.png">
                                            <label for="copper">CP</label>
                                            <input data-bind="textInput: copper" id="copper" >
                                        </div>
                                        <div class="col form-group">
                                            <img class="currency" src="../img/pixelated/sp.png">
                                            <label for="silver">SP</label>
                                            <input data-bind="textInput: silver" id="silver" >
                                        </div>
                                        <div class="col form-group">
                                            <img class="currency" src="../img/pixelated/ep.png">
                                            <label for="electrum">EP</label>
                                            <input data-bind="textInput: electrum" id="electrum" >
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col form-group">
                                            <img class="currency" src="../img/pixelated/gp.png">
                                            <label for="gold">GP</label>
                                            <input data-bind="textInput: gold" id="gold" >
                                        </div>
                                        <div class="col form-group">
                                            <img class="currency" src="../img/pixelated/pp.png">
                                            <label for="platinum">PP</label>
                                            <input data-bind="textInput: platinum" id="platinum" >
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group col textarea-col">
                                    <label for="equipment">Equipment</label>
                                    <textarea data-bind="textInput: equipment"  id="equipment" rows="10"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="container">
                            <div class="row">
                                <div class="form-group col textarea-col rpgui-container framed-golden-2">
                                    <label for="features">Features & Traits</label>
                                    <textarea data-bind="textInput: features"  id="features" rows="45"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="misc-counters-container" class="print-hidden">
                    <hr>
                    <div id="misc-counters-header">
                        <label>Custom Counters</label>
                        <button data-bind="click: addMiscCounter" type="button" id="btn-add-counter" class="rpgui-button btn-small">+</button>
                    </div>
                    <div data-bind="foreach: miscCounters" id="misc-counters" class="row">
                        <div class="misc-counter-block rpgui-container framed-grey">
                            <button data-bind="click: $parent.removeMiscCounter" type="button" id="btn-remove-counter" class="rpgui-button btn-small">-</button>
                            <span>Refresh on:</span>
                            <input data-bind="checked: shortRest, attr: { id: 'misc-short-'+$index() }" type="checkbox" class="misc-counter rpgui-checkbox">
                            <label data-bind="attr: { for: 'misc-short-'+$index() }">Short Rest</label>
                            <input data-bind="checked: longRest, disable: shortRest, attr: { id: 'misc-long-'+$index() }" type="checkbox" class="misc-counter rpgui-checkbox">
                            <label data-bind="attr: { for: 'misc-long-'+$index() }">Long Rest</label>
                            <input data-bind="textInput: name" class=" misc-counter counter-name" placeholder="Custom Counter Name">
                            <div>
                                <fancy-bar params="currentValue: current, maxValue: max, color: null"></fancy-bar>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div data-bind="with: character" class="tab-pane" id="bio" role="tabpanel" aria-labelledby="bio-tab">
            <div id="bio-container" class="container-fluid rpgui-container framed">
                <div class="header row block ">
                    <div class="col-6 form-group">
                        <label for="physical-description">Physical Description</label>
                        <textarea data-bind="textInput: physicalDescription" d="physical-description"  rows="5"></textarea>
                    </div>

                    <div class="col-6 container">
                        <div class="row">
                            <div class="form-group col">
                                <label for="age">Age</label>
                                <input data-bind="textInput: age" id="age" >
                            </div>
                            <div class="form-group col">
                                <label for="height">Height</label>
                                <input data-bind="textInput: height" id="height" >
                            </div>
                            <div class="form-group col">
                                <label for="weight">Weight</label>
                                <input data-bind="textInput: weight" id="weight" >
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col">
                                <label for="eyes">Eyes</label>
                                <input data-bind="textInput: eyes" id="eyes" >
                            </div>
                            <div class="form-group col">
                                <label for="skin">Skin</label>
                                <input data-bind="textInput: skin" id="skin" >
                            </div>
                            <div class="form-group col">
                                <label for="hair">Hair</label>
                                <input data-bind="textInput: hair" id="hair" >
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-3 form-group">
                        <label for="traits">Personality Traits</label>
                        <textarea data-bind="textInput: traits"  id="traits" rows="4"></textarea>
                    </div>
                    <div class="col-3 form-group">
                        <label for="ideals">Ideals</label>
                        <textarea data-bind="textInput: ideals"  id="ideals" rows="4"></textarea>
                    </div>
                    <div class="col-3 form-group">
                        <label for="bonds">Bonds</label>
                        <textarea data-bind="textInput: bonds"  id="bonds" rows="4"></textarea>
                    </div>
                    <div class="col-3 form-group">
                        <label for="flaws">Flaws</label>
                        <textarea data-bind="textInput: flaws"  id="flaws" rows="4"></textarea>
                    </div>
                </div>
                <div class="row">
                    <div class="col-6 form-group">
                        <label for="backstory">Backstory</label>
                        <textarea data-bind="textInput: backstory"  id="backstory" rows="10"></textarea>
                    </div>
                    <div class="col-6 form-group">
                        <label for="allies">Allies & Organizations</label>
                        <textarea data-bind="textInput: allies"  id="allies" rows="10"></textarea>
                    </div>
                </div>
                <div class="row">
                    <div class="col-6 form-group">
                        <label for="additional-features">Additional Features & Traits</label>
                        <textarea data-bind="textInput: additionalFeatures"  id="additional-features" rows="10"></textarea>
                    </div>
                    <div class="col-6 form-group">
                        <label for="treasure">Treasure</label>
                        <textarea data-bind="textInput: treasure"  id="treasure" rows="10"></textarea>
                    </div>
                </div>
            </div>
        </div>

        <div data-bind="with: character" class="tab-pane" id="spellbook" role="tabpanel" aria-labelledby="spellbook-tab">
            <div id="spellbook-container" class="container-fluid">
                <div class="header container-fluid block rpgui-container framed-golden">
                    <!-- ko foreach: spellcastingClasses -->
                    <!-- ko if: $index() > 0 -->
                    <hr>
                    <!-- /ko -->
                    <div class="row">
                        <div data-bind="attr: { 'data-modal': 'spellcastingClass-modal-'+$index() }" class="col-2 form-group modal-opener">
                            <label data-bind="text: $parent.spellcastingClassLabel($index())"></label>
                            <input data-bind="textInput: name, class: $parent.spellcastingClassCssClass($index())" readonly>
                        </div>
                        <div class="form-group col-2" style="text-align:center;">
                            <label for="spell-save-dc">Spell Save DC</label><br/><br/>
                            <span data-bind="text: $parent.spellSaveDC(ability(), bonusDC())" class="spell-save-dc"></span>
                        </div>
                        <div class="form-group col-2" style="text-align:center;">
                            <label for="spell-attack-bonus">Spell Attack Bonus</label><br/><br/>
                            <span data-bind="text: $parent.spellAttackBonus(ability(), bonusAttack())" class="spell-attack-bonus"></span>
                        </div>
                        <div class="col-4">
                            
                        </div>
                        <div class="col-2">
                            <!-- ko if: $index() === 0 && $parent.spellcastingClasses().length < 6 -->
                            <button data-bind="click: $parent.addSpellcastingClass" class="rpgui-button">Add Another Spellcasting Class</button>
                            <!-- /ko -->
                        </div>
                    </div>
                    <modal params="name: 'spellcastingClass-modal-'+$index()">
                        <div class="container">
                            <div class="row">
                                <div class="form-group col-6">
                                    <label>Class Name</label>
                                    <input data-bind="textInput: $parent.name">
                                </div>
                                <div class="form-group col-3">
                                    <label for="spellcasting-ability">Ability</label>
                                    <select data-bind="value: $parent.ability" class="rpgui-dropdown">
                                    <option value="STR">STR</option>
                                    <option value="DEX">DEX</option>
                                    <option value="CON">CON</option>
                                    <option value="INT">INT</option>
                                    <option value="WIS">WIS</option>
                                    <option value="CHAR">CHA</option>
                                    </select>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group col">
                                    <label>Bonus to Save DC</label>
                                    <input data-bind="textInput: $parent.bonusDC">
                                </div>
                                <div class="form-group col">
                                    <label>Bonus to Attacks</label>
                                    <input data-bind="textInput: $parent.bonusAttack">
                                </div>
                            </div>
                            <hr>
                            <div class="row">
                                <div class="col">
                                    <span>Spell Slots Refresh on:</span>
                                    <input data-bind="checked: $parent.restType, attr: { id: 'spell-rest-short-'+$index(), name:'spell-rest-'+$index() }" type="radio" class="rpgui-radio" value="1">
                                    <label data-bind="attr: { for: 'spell-rest-short-'+$index() }">Short Rest</label>
                                    <input data-bind="checked: $parent.restType, attr: { id: 'spell-rest-long-'+$index(), name:'spell-rest-'+$index() }" type="radio" class="rpgui-radio" value="2">
                                    <label data-bind="attr: { for: 'spell-rest-long-'+$index() }">Long Rest</label>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col">
                                    <!-- ko if: $index() > 0 -->
                                    <button data-bind="click: function(data, event) { $parentContext.$parent.removeSpellcastingClass($parent) }" class="rpgui-button">Delete Class</button>
                                    <!-- /ko -->
                                </div>
                            </div>
                        </div>
                    </modal>
                    <!-- /ko -->
                </div>

                <div data-bind="foreach: spellLevels" class="row">
                    <div data-bind="attr: { 'data-level': level }" class="container spell-block rpgui-container framed">
                        <label data-bind="text: $parent.spellLevelFormatted($index())" class="full-width-label"></label>
                        <button data-bind="click: function(){$parent.addSpell(level())}" type="button" id="btn-add-spell" class="rpgui-button btn-small">+</button>
                        <div id="spells">
                            <!--ko if: level-->
                            <div class="spell-slot-container">
                                <fancy-bar params="currentValue: slotsRemaining, maxValue: slotsTotal, color: 'blue'"></fancy-bar>
                            </div>
                            <!-- /ko -->
                            <!-- ko foreach: spells -->
                            <div class="spell-row row" data-bind="event: { drop: function(data, e) { e.target.closest('[draggable=true]').style.borderTop = '2px solid transparent'; $root.character().removeSpell(draggedSpell, $parentContext.$index()); $root.character().spellLevels()[$parentContext.$index()].spells.splice($index(),0,draggedSpell) },
                            dragstart: function(data, e) { draggedSpell = $data; e.target.style.opacity = .5; return true; },
                            dragend: function(data, e) { draggedSpell = null; e.target.style.opacity = 1; },
                            dragenter: function(data, e) { e.target.closest('[draggable=true]').style.borderTop = '2px solid #d27d2b' },
                            dragleave: function(data, e) { e.target.closest('[draggable=true]').style.borderTop = '2px solid transparent' },
                            dragover: function(data, e) { }}"
                            draggable="true">
                                <button data-bind="click: function(data, event) {$parentContext.$parent.removeSpell(data, $parentContext.$index())}" type="button" id="btn-remove-spell" class="col-1 rpgui-button btn-small">-</button>
                                <div class="autocomplete col">
                                    <input data-bind="textInput: name, class: $parentContext.$parent.spellCssClass($parentContext.$index(), $index()), bindSpell: { level: $parent.level, name: name } ">
                                </div>
                                <!-- ko if: $parentContext.$parent.spellcastingClasses().length > 1 -->
                                <div data-bind="spellclassbox: casterClass" class="spellclassbox"></div>
                                <!-- /ko -->
                                <!-- ko if: $parent.level -->
                                <input data-bind="checked: prepared, attr: { id: 'prepared-'+$parent.level()+'-'+$index() }" class="col-1 spell-prepared print-hidden rpgui-checkbox" type="checkbox">
                                <label data-bind="attr: { for: 'prepared-'+$parent.level()+'-'+$index() }" class="prepared-label"></label>
                                <!-- /ko -->
                            </div>
                            <!-- /ko -->
                        </div>
                        <div class="row">
                            
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="tab-pane" id="spellcatalog5e" role="tabpanel" aria-labelledby="spellcatalog5e-tab">
            <spell-catalog-dnd5e params="catalog: spellCatalog5e, spell: spell5e, addFunc: function(l,n){$root.character().addSpell(l, n)}, disableFunc: function(n) { return character().hasSpell(n) }"></spell-catalog-dnd5e>
        </div>
    </div>
</body>

</html>
